<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Motivational Quote Generator</title>

  <link rel="stylesheet" href="styles/main.css" />
  <link rel="stylesheet" href="styles/themes.css" />
  <link rel="stylesheet" href="styles/premium-themes.css" />
</head>

<body>
  <!-- âœ… Tabs -->
  <nav class="top-tabs">
    <a href="index.html" class="active">Generator</a>
    <a href="shop.html">Shop</a>
    <a href="settings.html">Settings</a>
  </nav>

  <div id="app">
    <div id="quote-container">
      <p id="quote">Click the button to generate a quote!</p>
    </div>

    <div id="controls">
      <button id="generate-btn">
        <img src="assets/icons/purple-heart.svg" alt="ðŸ’œ" width="18" />
        Generate
      </button>
      <button id="copy-btn">Copy Quote</button>
    </div>
  </div>

  <script src="scripts/app.js"></script>
  <script src="scripts/premiumThemes.js"></script>

  <script>
    // âœ… Apply saved settings on load (safe: doesn't nuke body.className)
    const settings = JSON.parse(localStorage.getItem("quoteAppSettings")) || {};

    // Background image
    document.body.style.backgroundImage = settings.backgroundImage
      ? `url('${settings.backgroundImage}')`
      : "none";
    document.body.style.backgroundSize = "cover";
    document.body.style.backgroundPosition = "center";
    document.body.style.backgroundRepeat = "no-repeat";

    // Remove known theme classes only (don't wipe everything)
    const KNOWN_THEMES = [
      "soft-girlie","midnight-black","lavender-dreams","mint-cream","peachy-vibes",
      "sky-blue-bliss","rose-quartz","ocean-deep","vanilla-cream","blush-pink",
      "lemon-sorbet","dusty-rose","cool-grey","mauve-magic","custom",
      "premium","premium-pink-cherry","premium-green-vines"
    ];
    KNOWN_THEMES.forEach(t => document.body.classList.remove(t));

    // Preset theme class
    if (settings.theme && settings.theme !== "default") {
      document.body.classList.add(settings.theme);
    }

    // Custom theme vars
    if (settings.colors && settings.theme === "custom") {
      document.body.classList.add("custom");
      document.documentElement.style.setProperty("--custom-bg-color", settings.colors.bgColor);
      document.documentElement.style.setProperty("--custom-text-color", settings.colors.textColor);
      document.documentElement.style.setProperty("--custom-button-color", settings.colors.buttonColor);
      document.documentElement.style.setProperty("--custom-quote-bg", "rgba(0, 0, 0, 0.6)");
    }

    // Dark mode (for panels/cards)
    document.body.classList.toggle("dark-mode", !!settings.darkMode);

    // Premium theme packs (from Shop) â€” apply last
    if (settings.theme === "premium" && settings.premiumThemeId && typeof applyPremiumTheme === "function") {
      applyPremiumTheme(settings.premiumThemeId);
    }
  </script>

  <!-- Decorations auto-apply from settings on load -->
  <script src="scripts/decorations.js"></script>
  <script src="scripts/nav.js"></script>
</body>
</html>